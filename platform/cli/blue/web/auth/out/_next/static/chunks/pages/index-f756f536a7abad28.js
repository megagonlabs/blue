(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4079)}])},4079:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var l=n(5893),i=n(6527),s=n(3766);let o=i.q.create({position:s.Ly.BOTTOM});var a=n(2609),c=n(152),d=n(9398),u=n(5233),r=n(3640),h=n(5724),C=n(4129),g=n(5121),p=n(3977),f=n(1259),w=n(6486),S=n.n(w),E=n(9008),N=n.n(E),_=n(7294);let m=(0,p.ZF)({apiKey:"AIzaSyAkVp-dj3o1yf89mL3wMUtEidUHjzqyWCQ",authDomain:"blue-9d597.firebaseapp.com",projectId:"blue-9d597",storageBucket:"blue-9d597.appspot.com",messagingSenderId:"851224572522",appId:"1:851224572522:web:b8b3f5b50e30333773d013"}),x=(0,f.v0)(m),R=new f.hJ,j=(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",role:"img",children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.64 9.20419C17.64 8.56601 17.5827 7.95237 17.4764 7.36328H9V10.8446H13.8436C13.635 11.9696 13.0009 12.9228 12.0477 13.561V15.8192H14.9564C16.6582 14.2524 17.64 11.9451 17.64 9.20419Z",fill:"#4285F4"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.99976 18C11.4298 18 13.467 17.1941 14.9561 15.8195L12.0475 13.5613C11.2416 14.1013 10.2107 14.4204 8.99976 14.4204C6.65567 14.4204 4.67158 12.8372 3.96385 10.71H0.957031V13.0418C2.43794 15.9831 5.48158 18 8.99976 18Z",fill:"#34A853"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.96409 10.7098C3.78409 10.1698 3.68182 9.59301 3.68182 8.99983C3.68182 8.40664 3.78409 7.82983 3.96409 7.28983V4.95801H0.957273C0.347727 6.17301 0 7.54755 0 8.99983C0 10.4521 0.347727 11.8266 0.957273 13.0416L3.96409 10.7098Z",fill:"#FBBC05"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.99976 3.57955C10.3211 3.57955 11.5075 4.03364 12.4402 4.92545L15.0216 2.34409C13.4629 0.891818 11.4257 0 8.99976 0C5.48158 0 2.43794 2.01682 0.957031 4.95818L3.96385 7.29C4.67158 5.16273 6.65567 3.57955 8.99976 3.57955Z",fill:"#EA4335"})]});function v(){let[e,t]=(0,_.useState)(!0),[n,i]=(0,_.useState)(!1),[s,p]=(0,_.useState)(null),[w,E]=(0,_.useState)(null);(0,_.useEffect)(()=>{t(!0);let e="localhost:25831",n=new WebSocket("ws://".concat(e));n.onopen=()=>{n.send(JSON.stringify("REQUEST_CONNECTION_INFO")),t(!1),o.show({intent:a.S.SUCCESS,message:"Connectied to Blue CLI"})},n.onmessage=e=>{try{let t=JSON.parse(e.data),l=S().get(t,"type",null),s=S().get(t,"message",null);S().isEqual(l,"REQUEST_CONNECTION_INFO")?p(s):S().has(t,"error")?o.show({intent:a.S.DANGER,message:t.error}):S().isEqual(t,"done")&&(i(!0),n.close())}catch(t){o.show({intent:a.S.WARNING,message:e.data}),console.log(e.data),console.error(t)}},n.onerror=()=>{o.show({intent:a.S.DANGER,message:"WebSocket connection to 'ws://".concat(e,"' failed")}),E(null),t(!1)},E(n)},[]);let[m,v]=(0,_.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(N(),{children:[(0,l.jsx)("title",{children:"Blue CLI"}),(0,l.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,l.jsx)("link",{rel:"icon",href:"/images/favicon.ico"})]}),n?(0,l.jsx)("div",{style:{padding:15},children:(0,l.jsx)(c.U,{intent:a.S.SUCCESS,children:"Authentication details received, processing details. You may close this window at any time."})}):(0,l.jsxs)(d.V,{autoFocus:!0,enforceFocus:!0,style:{maxWidth:300,backgroundColor:u.w.WHITE},isCloseButtonShown:!1,title:"Blue CLI",isOpen:!0,children:[S().isNil(w)?(0,l.jsx)(c.U,{style:{borderRadius:0},intent:a.S.DANGER,icon:null,children:"Unable to connect to Blue CLI"}):null,(0,l.jsx)(r.a,{children:(0,l.jsx)(h.z,{loading:m,disabled:S().isNil(w),large:!0,outlined:!0,className:e?C.Ms1:null,text:"Sign in with Google",onClick:()=>{let e=S().get(s,"BLUE_PUBLIC_API_SERVER_PROTOCOL","https://"),t=S().get(s,"BLUE_PUBLIC_API_SERVER",null);v(!0),(0,f.rh)(x,R).then(n=>{n.user.getIdToken().then(n=>{g.Z.post("".concat(e,"://").concat(t,"/accounts/sign-in/cli"),{id_token:n}).then(e=>{w.send(JSON.stringify(S().get(e,"data.cookie",null))),v(!1)}).catch(()=>{v(!1)})})}).catch(()=>{v(!1)})},fill:!0,icon:j})})]})]})}}},function(e){e.O(0,[963,603,888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);