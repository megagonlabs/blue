(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(4079)}])},4079:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return R}});var l=t(5893),i=t(6527),o=t(3766);let s=i.q.create({position:o.Ly.BOTTOM});var a=t(2609),c=t(152),d=t(9398),u=t(5233),r=t(3640),h=t(5724),C=t(4129),g=t(5121),p=t(3977),f=t(1259),w=t(6486),S=t.n(w),E=t(9008),N=t.n(E),m=t(7294);let _=(0,p.ZF)({apiKey:"AIzaSyAkVp-dj3o1yf89mL3wMUtEidUHjzqyWCQ",authDomain:"blue-9d597.firebaseapp.com",projectId:"blue-9d597",storageBucket:"blue-9d597.appspot.com",messagingSenderId:"851224572522",appId:"1:851224572522:web:b8b3f5b50e30333773d013"}),x=(0,f.v0)(_),j=new f.hJ,v=(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",role:"img",children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.64 9.20419C17.64 8.56601 17.5827 7.95237 17.4764 7.36328H9V10.8446H13.8436C13.635 11.9696 13.0009 12.9228 12.0477 13.561V15.8192H14.9564C16.6582 14.2524 17.64 11.9451 17.64 9.20419Z",fill:"#4285F4"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.99976 18C11.4298 18 13.467 17.1941 14.9561 15.8195L12.0475 13.5613C11.2416 14.1013 10.2107 14.4204 8.99976 14.4204C6.65567 14.4204 4.67158 12.8372 3.96385 10.71H0.957031V13.0418C2.43794 15.9831 5.48158 18 8.99976 18Z",fill:"#34A853"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.96409 10.7098C3.78409 10.1698 3.68182 9.59301 3.68182 8.99983C3.68182 8.40664 3.78409 7.82983 3.96409 7.28983V4.95801H0.957273C0.347727 6.17301 0 7.54755 0 8.99983C0 10.4521 0.347727 11.8266 0.957273 13.0416L3.96409 10.7098Z",fill:"#FBBC05"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.99976 3.57955C10.3211 3.57955 11.5075 4.03364 12.4402 4.92545L15.0216 2.34409C13.4629 0.891818 11.4257 0 8.99976 0C5.48158 0 2.43794 2.01682 0.957031 4.95818L3.96385 7.29C4.67158 5.16273 6.65567 3.57955 8.99976 3.57955Z",fill:"#EA4335"})]});function R(){let[e,n]=(0,m.useState)(!0),[t,i]=(0,m.useState)(!1),[o,p]=(0,m.useState)(null),[w,E]=(0,m.useState)(null);(0,m.useEffect)(()=>{n(!0);let e="localhost:25831",t=new WebSocket("ws://".concat(e));t.onopen=()=>{t.send(JSON.stringify("REQUEST_CONNECTION_INFO")),n(!1),s.show({intent:a.S.SUCCESS,message:"Connected to Blue CLI"})},t.onmessage=e=>{try{let n=JSON.parse(e.data),l=S().get(n,"type",null),o=S().get(n,"message",null);S().isEqual(l,"REQUEST_CONNECTION_INFO")?p(o):S().has(n,"error")?s.show({intent:a.S.DANGER,message:n.error}):S().isEqual(n,"done")&&(i(!0),t.close())}catch(n){s.show({intent:a.S.WARNING,message:e.data}),console.log(e.data),console.error(n)}},t.onerror=()=>{s.show({intent:a.S.DANGER,message:"WebSocket connection to 'ws://".concat(e,"' failed")}),E(null),n(!1)},E(t)},[]);let[_,R]=(0,m.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(N(),{children:[(0,l.jsx)("title",{children:"Blue CLI"}),(0,l.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,l.jsx)("link",{rel:"icon",href:"/images/favicon.ico"})]}),t?(0,l.jsx)("div",{style:{padding:15},children:(0,l.jsx)(c.U,{intent:a.S.SUCCESS,children:"Authentication details received, processing details. You may close this window at any time."})}):(0,l.jsxs)(d.V,{autoFocus:!0,enforceFocus:!0,style:{maxWidth:300,backgroundColor:u.w.WHITE},isCloseButtonShown:!1,title:"Blue CLI",isOpen:!0,children:[S().isNil(w)?(0,l.jsx)(c.U,{style:{borderRadius:0},intent:a.S.DANGER,icon:null,children:"Unable to connect to Blue CLI"}):null,(0,l.jsx)(r.a,{children:(0,l.jsx)(h.z,{loading:_,disabled:S().isNil(w),large:!0,outlined:!0,className:e?C.Ms1:null,text:"Sign in with Google",onClick:()=>{let e=S().get(o,"BLUE_PUBLIC_API_SERVER",null),n=S().get(o,"BLUE_DEPLOY_PLATFORM",null);R(!0),(0,f.rh)(x,j).then(t=>{t.user.getIdToken().then(t=>{g.Z.post("".concat(e,"/blue/platform/").concat(n,"/accounts/sign-in/cli"),{id_token:t}).then(e=>{w.send(JSON.stringify(S().get(e,"data.cookie",null))),R(!1)}).catch(()=>{R(!1)})})}).catch(e=>{R(!1),s.show({intent:a.S.DANGER,message:"".concat(e.code?"[".concat(e.code,"]"):""," ").concat(e.message)})})},fill:!0,icon:v})})]})]})}}},function(e){e.O(0,[963,603,888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);